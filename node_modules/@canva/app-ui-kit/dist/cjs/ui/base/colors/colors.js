"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get getContrastingBackgroundColor () {
        return getContrastingBackgroundColor;
    },
    get getContrastingForegroundColor () {
        return getContrastingForegroundColor;
    }
});
const _alpha_over = require('../../../base/color/alpha_over');
const _color = require('../../../base/color/color');
const _css_colors = require('../../../base/color/css_colors');
const _difference = require('../../../base/color/difference');
const _max_by = require('../../../base/max_by');
const _colorscss = _interop_require_default(require("./colors.css"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function getContrastingForegroundColor(backgroundColor, candidates = [
    _colorscss.default.colorWhite,
    _colorscss.default.colorBlack
]) {
    try {
        const convertedBgColor = _css_colors.CssColors.fromString(backgroundColor);
        const backgroundAsRgbColor = convertedBgColor instanceof _color.RgbaColor ? convertedBgColor.toRgb() : convertedBgColor;
        return (0, _max_by.maxBy)(candidates, (candidate)=>{
            const convertedCandidate = _css_colors.CssColors.fromString(candidate);
            const finalCandidate = convertedCandidate instanceof _color.RgbaColor ? (0, _alpha_over.alphaOver)(convertedCandidate, backgroundAsRgbColor) : convertedCandidate;
            return Math.abs(_difference.Difference.apcaContrast(finalCandidate, backgroundAsRgbColor));
        });
    } catch (error) {
        if (error instanceof Error && error.message === `unrecognized color: ${candidates[0]}`)
            return candidates[0];
        throw error;
    }
}
function getContrastingBackgroundColor(foregroundColor, candidates = [
    _colorscss.default.colorWhite,
    _colorscss.default.colorBlack
]) {
    try {
        const convertedFgColor = _css_colors.CssColors.fromString(foregroundColor);
        return (0, _max_by.maxBy)(candidates, (candidate)=>{
            const convertedBgCandidate = _css_colors.CssColors.fromString(candidate);
            const convertedBgCandidateAsRgbColor = convertedBgCandidate instanceof _color.RgbaColor ? convertedBgCandidate.toRgb() : convertedBgCandidate;
            const finalFgColor = convertedFgColor instanceof _color.RgbaColor ? (0, _alpha_over.alphaOver)(convertedFgColor, convertedBgCandidateAsRgbColor) : convertedFgColor;
            return Math.abs(_difference.Difference.apcaContrast(finalFgColor, convertedBgCandidateAsRgbColor));
        });
    } catch (error) {
        if (error instanceof Error && error.message === `unrecognized color: ${candidates[0]}`)
            return candidates[0];
        throw error;
    }
}
