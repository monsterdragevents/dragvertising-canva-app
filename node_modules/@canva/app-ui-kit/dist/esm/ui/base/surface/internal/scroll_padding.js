import * as React from 'react';
import ResizeObserver from 'resize-observer-polyfill';
export function useScrollPaddingRefs() {
    const containerRef = React.useRef(null);
    const [setHeaderRef, headerHeight] = useElementHeight();
    const [setFooterRef, footerHeight] = useElementHeight();
    React.useLayoutEffect(()=>{
        const container = containerRef.current;
        if (!container) return;
        if (headerHeight != null)
            container.style.scrollPaddingTop = `${headerHeight}px`;
        if (footerHeight != null) container.style.scrollPaddingBottom = `${footerHeight}px`;
    }, [
        headerHeight,
        footerHeight
    ]);
    return {
        containerRef,
        headerRef: setHeaderRef,
        footerRef: setFooterRef
    };
}
export function useElementHeight() {
    const [height, setHeight] = React.useState(undefined);
    const observerRef = React.useRef(null);
    const ref = React.useCallback((node)=>{
        if (observerRef.current) {
            observerRef.current.disconnect();
            observerRef.current = null;
        }
        if (node) {
            observerRef.current = new ResizeObserver((entries)=>{
                const entry = entries[0];
                if (entry === null || entry === void 0 ? void 0 : entry.contentRect) setHeight(entry.contentRect.height);
            });
            observerRef.current.observe(node);
        }
    }, []);
    return [
        ref,
        height
    ];
}
