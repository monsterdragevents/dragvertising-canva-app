import { jsx as _jsx } from "react/jsx-runtime";
import classNames from 'classnames';
import * as React from 'react';
import { AspectRatio } from '../../aspect_ratio/aspect_ratio';
import { resolveUnitOrNumberSize } from '../../metrics/metrics';
import styles from './thumbnail.css';
export const ThumbnailContainerContext = React.createContext(undefined);
export const useInThumbnailContainerContext = ()=>{
    const containerContext = React.useContext(ThumbnailContainerContext);
    return containerContext != null;
};
export const ThumbnailContainer = ({ children, className, background = 'secondary', border = 'none', borderRadius = 'elementSmall', fit = 'cover', padding = '2u', height, width, aspectRatio: aspectRatioProp })=>{
    const aspectRatio = resolveAspectRatio({
        width,
        height,
        aspectRatio: aspectRatioProp
    });
    return _jsx(SizingContainer, {
        height: height,
        width: width,
        aspectRatio: aspectRatio,
        children: _jsx("div", {
            className: classNames(styles.thumbnailContainer, className, getThumbnailContainerClassNames({
                background,
                border,
                borderRadius,
                padding
            })),
            children: _jsx(ThumbnailContainerContext.Provider, {
                value: {
                    aspectRatio,
                    padding,
                    fit
                },
                children: children
            })
        })
    });
};
const getThumbnailContainerClassNames = ({ background, border, borderRadius, padding })=>{
    const backgroundClasses = {
        [styles.secondaryBackground]: background === 'secondary',
        [styles.contrastOnLight]: background === 'contrastOnLight',
        [styles.contrastOnDark]: background === 'contrastOnDark',
        [styles.secondaryBackgroundHover]: background === 'secondaryHover',
        [styles.contrastOnLightHover]: background === 'contrastOnLightHover',
        [styles.contrastOnDarkHover]: background === 'contrastOnDarkHover'
    };
    const borderClasses = {
        [styles.border]: border !== 'none',
        [styles.lowBorder]: border === 'low',
        [styles.elementSmallBorderRadius]: borderRadius === 'elementSmall',
        [styles.elementBorderRadius]: borderRadius === 'element',
        [styles.elementRelaxedBorderRadius]: borderRadius === 'elementRelaxed'
    };
    const paddingClasses = {
        [styles.paddingOneUnit]: padding === '1u',
        [styles.paddingTwoUnit]: padding === '2u'
    };
    return classNames(backgroundClasses, borderClasses, paddingClasses);
};
export const SizingContainer = ({ aspectRatio, width, height, children })=>{
    const widthInPixel = resolveUnitOrNumberSize(width);
    const heightInPixel = resolveUnitOrNumberSize(height);
    if (aspectRatio != null) return _jsx(AspectRatio, {
        ratio: aspectRatio,
        width: width,
        height: height,
        children: children
    });
    if (width != null || height != null) return _jsx("div", {
        style: {
            width: widthInPixel !== null && widthInPixel !== void 0 ? widthInPixel : '100%',
            height: heightInPixel !== null && heightInPixel !== void 0 ? heightInPixel : '100%',
            flexShrink: 0
        },
        children: children
    });
    return children;
};
export const resolveAspectRatio = ({ aspectRatio, width, height })=>{
    const widthInPixel = resolveUnitOrNumberSize(width);
    const heightInPixel = resolveUnitOrNumberSize(height);
    return aspectRatio !== null && aspectRatio !== void 0 ? aspectRatio : widthInPixel != null && heightInPixel != null ? widthInPixel / heightInPixel : undefined;
};
