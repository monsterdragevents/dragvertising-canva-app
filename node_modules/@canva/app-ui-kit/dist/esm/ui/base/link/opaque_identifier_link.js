import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import * as React from 'react';
import { Link } from './link';
export const OpaqueIdentifierLink = React.forwardRef(function OpaqueIdentifierLink(props, ref) {
    const [href, setHref] = React.useState();
    const spanRef = React.useRef(null);
    React.useEffect(()=>{
        var _spanRef_current;
        const resolvedId = (_spanRef_current = spanRef.current) === null || _spanRef_current === void 0 ? void 0 : _spanRef_current.getAttribute('data-id');
        if (resolvedId == null) return;
        setHref(`#${resolvedId}`);
    }, [
        props.to
    ]);
    return _jsxs(_Fragment, {
        children: [
            href == null && _jsx("span", {
                ref: spanRef,
                "data-id": props.to
            }),
            _jsx(Link, {
                ...props,
                href: href !== null && href !== void 0 ? href : '',
                ref: ref
            })
        ]
    });
});
