import { jsx as _jsx } from "react/jsx-runtime";
import * as React from 'react';
import { useInputControls } from '../../base_input/base_input';
import { EyeIcon } from '../../../icons/eye/icon';
import { EyeSlashIcon } from '../../../icons/eye_slash/icon';
import { ButtonDecorator } from './button_decorator';
import { InputDecoratorsMessages } from './input_decorators.messages';
export const ShowPasswordDecorator = React.memo(
    function ShowPasswordDecorator({ showLabel = InputDecoratorsMessages.showPassword(), hideLabel = InputDecoratorsMessages.hidePassword(), onShow, onHide }) {
        const controls = useInputControls();
        const [show, setShow] = React.useState(false);
        const onClick = React.useCallback(()=>{
            var _controls_setType;
            const willShow = !show;
            (_controls_setType = controls.setType) === null || _controls_setType === void 0 ? void 0 : _controls_setType.call(controls, willShow ? 'text' : undefined);
            controls.focus();
            if (willShow) onShow === null || onShow === void 0 ? void 0 : onShow();
            else onHide === null || onHide === void 0 ? void 0 : onHide();
            setShow(willShow);
        }, [
            show,
            controls,
            onShow,
            onHide
        ]);
        React.useEffect(()=>{
            return ()=>{
                var _controls_setType;
                return (_controls_setType = controls.setType) === null || _controls_setType === void 0 ? void 0 : _controls_setType.call(controls, undefined);
            };
        }, [
            controls
        ]);
        return _jsx(ButtonDecorator, {
            label: show ? hideLabel : showLabel,
            icon: show ? EyeSlashIcon : EyeIcon,
            onClick: onClick
        });
    }
);
