import { alphaOver } from '../../../base/color/alpha_over';
import { RgbaColor } from '../../../base/color/color';
import { CssColors } from '../../../base/color/css_colors';
import { Difference } from '../../../base/color/difference';
import { maxBy } from '../../../base/max_by';
import colors from './colors.css';
export function getContrastingForegroundColor(
    backgroundColor,
    candidates = [
        colors.colorWhite,
        colors.colorBlack
    ]
) {
    try {
        const convertedBgColor = CssColors.fromString(backgroundColor);
        const backgroundAsRgbColor = convertedBgColor instanceof RgbaColor ? convertedBgColor.toRgb() : convertedBgColor;
        return maxBy(candidates, (candidate)=>{
            const convertedCandidate = CssColors.fromString(candidate);
            const finalCandidate = convertedCandidate instanceof RgbaColor ? alphaOver(convertedCandidate, backgroundAsRgbColor) : convertedCandidate;
            return Math.abs(Difference.apcaContrast(finalCandidate, backgroundAsRgbColor));
        });
    } catch (error) {
        if (error instanceof Error && error.message === `unrecognized color: ${candidates[0]}`)
            return candidates[0];
        throw error;
    }
}
export function getContrastingBackgroundColor(
    foregroundColor,
    candidates = [
        colors.colorWhite,
        colors.colorBlack
    ]
) {
    try {
        const convertedFgColor = CssColors.fromString(foregroundColor);
        return maxBy(candidates, (candidate)=>{
            const convertedBgCandidate = CssColors.fromString(candidate);
            const convertedBgCandidateAsRgbColor = convertedBgCandidate instanceof RgbaColor ? convertedBgCandidate.toRgb() : convertedBgCandidate;
            const finalFgColor = convertedFgColor instanceof RgbaColor ? alphaOver(convertedFgColor, convertedBgCandidateAsRgbColor) : convertedFgColor;
            return Math.abs(Difference.apcaContrast(finalFgColor, convertedBgCandidateAsRgbColor));
        });
    } catch (error) {
        if (error instanceof Error && error.message === `unrecognized color: ${candidates[0]}`)
            return candidates[0];
        throw error;
    }
}
